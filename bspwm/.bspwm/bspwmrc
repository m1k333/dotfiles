#!/bin/sh

## Read settings #######################################################

. ${HOME}/.bspwm/settings

## Appearance ##########################################################

# Border widths and window gaps 
bspc config border_width $BORDER_WIDTH
bspc config window_gap   $WINDOW_GAP

# Set border colours
import_border_colors

## Behaviour ###########################################################

# Preselection settings
bspc config auto_cancel           true
bspc config split_ratio           0.50

# bspc commands change depending on bspwm's state
bspc config auto_alternate        true

# Mouse mode
bspc config focus_follows_pointer $FOCUS_FOLLOWS_POINTER

## Set up BSPWM desktops (AFTER setting everything else!) ##############

# Wallpaper
WPFILE="$(ls ${HOME}/.bspwm | grep wallpaper)"
[ -n $WPFILE ] && feh --no-fehbg --bg-fill ${HOME}/.bspwm/${WPFILE}

# Cursor
xsetroot -cursor_name left_ptr

# Desktops
[ -f ${HOME}/.bspwm/desktops ] && . ${HOME}/.bspwm/desktops || \
bspc monitor -d 1 2 3 4 5 6 7 8 9 0

# Configure X server
configure_x    

## BSPWM panel #########################################################

# Run the script
bspwm-panel > /dev/null 2>&1 &

# Let panel load, then change its name
sleep 1 && \
xdotool search --name 'bar' set_window --name 'bspwmpanelbar' &

## EOF #################################################################
