#!/bin/sh

## Read settings #######################################################

. ${HOME}/.bspwm/settings

## Settings ############################################################

# Appearance
bspc config border_width       $BORDER_WIDTH
bspc config window_gap         $WINDOW_GAP
bspc config borderless_monocle $BORDERLESS_MONOCLE
bspc config gapless_monocle    $GAPLESS_MONOCLE
import_border_colors

# Stuff I might change
bspc config focus_follows_pointer $FOCUS_FOLLOWS_POINTER

# Stuff I'll probably never change
bspc config auto_cancel    true
bspc config split_ratio    0.50
bspc config auto_alternate true

## Set up X server and monitors, autorun external programs #############

if [ ! -f $BSPWM_INITIALIZED_FLAG ]
then
    # Set initialized flag
    touch $BSPWM_INITIALIZED_FLAG

    # Set up BSPWM desktops (AFTER setting everything else!)
    import_monitors

    #Configure X server
    xautorun bspwm

    # Run panel script
    bspwm-panel > /dev/null 2>&1 &

    # Let panel load, then change its name
    sleep 1
    xdotool search --name 'bar' set_window --name 'bspwmpanelbar'
fi

## EOF #################################################################
