#!/bin/sh

arg=$1 # Pass the WM to set up as arg $1

# Configure the script below depending on which WM was chosen
case $arg in
    bspwm)
        BGDIR="${HOME}/.bspwm"
        FALLBACKCOLOR='rgb:00/2B/36'
        ;;
    spectrwm) 
        BGDIR="${HOME}/.spectrwm.d"
        FALLBACKCOLOR='rgb:10/10/10'
        ;;
esac

# X settings
[ -e ${HOME}/.xmodmap ] && xmodmap ${HOME}/.xmodmap
command -v xcape > /dev/null 2>&1 && xcape -e 'Control_L=Escape'
xset -b s 1800 dpms 1800 1800 1800
xrdb -merge ~/.Xresources

# Root window
feh --no-fehbg --bg-fill ${BGDIR}/wallpaper* 2> /dev/null || xsetroot -solid $FALLBACKCOLOR
xsetroot -cursor_name left_ptr

# Redshift
if [ -e ${HOME}/.config/redshift.conf ]
then    
    while pgrep redshift > /dev/null 2>&1
    do
        pkill -x -9 redshift 2> /dev/null
    done
    redshift &
fi

# Make QT pick up on GTK themes and icons 
export DESKTOP_SESSION=gnome;

# EOF
